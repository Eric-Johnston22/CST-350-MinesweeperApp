<header>
    <link rel="stylesheet" href="~/css/gameboardstyle.css" />
</header>

<html>
    <body>

    @if(ViewBag.exploded!=true&&ViewBag.gamewon!=true) {
        <form>
            <div class="flex-grid">
                @for (int i = 0; i < ViewBag.board.Size; i++)
                {
                    @for (int j = 0; j < ViewBag.board.Size; j++)
                    {
                        @if (ViewBag.board.Grid[i, j].Visited == true)
                        {
                            @if (ViewBag.board.Grid[i, j].LiveNeighbors > 0)
                            {
                                <div class="flex-box">
                                    <button class="clicked" style="border: medium solid black;" type="submit" value="@(String.Format("{0},{1}",i,j))" name="buttonNumber" asp-controller="Game" asp-action="HandleButtonClick">

                                        @switch (ViewBag.board.Grid[i, j].LiveNeighbors)
                                        {
                                            case 1:
                                                <div style="color:black">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                                                break;
                                            case 2:
                                                <div style="color:blue">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                                                break;
                                            case 3:
                                                <div style="color:green">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                                                break;
                                            case 4:
                                                <div style="color:brown">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                                                break;
                                            case 5:
                                                <div style="color:purple">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                                                break;
                                            case 6:
                                                <div style="color:yellow">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                                                break;
                                            case 7:
                                                <div style="color:darkorange">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                                                break;
                                            case 8:
                                                <div style="color:red">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                                                break;
                                            default:
                                                <div style="color:black">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                                                break;
                                        }
                                    </button>
                                    <div></div>
                                </div>
                            }
                            else
                            {
                                <div class="flex-box">
                                    <button class="clicked" style="border: medium solid black;" type="submit" value="@(String.Format("{0},{1}",i,j))" name="buttonNumber" asp-controller="Game" asp-action="HandleButtonClick">
                                    </button>
                                </div>
                            }
                        }
                        else
                        {
                            <div class="flex-box">
                                <button class="unclicked" style="border: medium solid black;" type="submit" value="@(String.Format("{0},{1}",i,j))" name="buttonNumber" asp-controller="Game" asp-action="HandleButtonClick">
                                </button>
                            </div>
                        }
                    }
                    @if (i != ViewBag.board.Size - 1)
                    {
                        <div class="line-break"></div>
                    }
                }
            </div>
        </form>
    } else if (ViewBag.gamewon==true) 
    {
        <div class="flex-grid">
            @for (int i = 0; i < ViewBag.board.Size; i++)
            {
                @for (int j = 0; j < ViewBag.board.Size; j++)
                {
                    @if (ViewBag.board.Grid[i, j].Live == true)
                    {
                        <div class="flex-box">
                            <img class="game-button-image" src="~/img/flag.jpg">
                        </div>
                    }
                    else if (ViewBag.board.Grid[i, j].LiveNeighbors > 0)
                    {
                        <div class="flex-box">
                            <button class="clicked" style="border: medium solid black;" type="submit" value="@(String.Format("{0},{1}",i,j))" name="buttonNumber" asp-controller="Game" asp-action="HandleButtonClick">
                                <div style="color:green">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                            </button>
                        </div>
                    }
                    else
                    {
                        <div class="flex-box">
                            <button class="clicked" style="border: medium solid black;" type="submit" value="@(String.Format("{0},{1}",i,j))" name="buttonNumber" asp-controller="Game" asp-action="HandleButtonClick">
                            </button>
                        </div>
                    }
                }
                @if (i != ViewBag.board.Size - 1)
                {
                    <div class="line-break"></div>
                }
            }
        </div>
    }else
    {
        <div class="flex-grid">
            @for (int i = 0; i < ViewBag.board.Size; i++)
            {
                @for (int j = 0; j < ViewBag.board.Size; j++)
                {
                    @if (ViewBag.board.Grid[i, j].Live == true)
                    {
                        <div class="flex-box">
                            <img class="game-button-image" src="~/img/bomb.png">
                        </div>
                    } else if (ViewBag.board.Grid[i, j].LiveNeighbors > 0)
                    {
                        <div class="flex-box">
                            <button class="clicked" style="border: medium solid black;" type="submit" value="@(String.Format("{0},{1}",i,j))" name="buttonNumber" asp-controller="Game" asp-action="HandleButtonClick">
                                <div style="color:red">@(string.Format("{0}", ViewBag.board.Grid[i, j].LiveNeighbors))</div>
                            </button>
                        </div>
                    }
                    else
                    {
                        <div class="flex-box">
                            <button class="clicked" style="border: medium solid black;" type="submit" value="@(String.Format("{0},{1}",i,j))" name="buttonNumber" asp-controller="Game" asp-action="HandleButtonClick">
                            </button>
                        </div>
                    }
                }
                @if (i != ViewBag.board.Size - 1)
                {
                    <div class="line-break"></div>
                }
            }
        </div>
    }
    <br />
    <form>
        <button class="new-game-button" asp-asp-controller="Game" asp-action="NewGame">New Game</button>
    </form>
    </body>
</html>





